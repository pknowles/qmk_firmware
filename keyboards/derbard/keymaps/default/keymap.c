#include QMK_KEYBOARD_H

#define LAYOUT(NAK, \
	K00, K01, K02, K03, K04, K05, K06, \
	K10, K11, K12, K13, K14, K15, K16, \
	K20, K21, K22, K23, K24, K25, K26, \
	K30, K31, K32, K33, K34, K35, K36,  \
	                    K37, K38, K39,  \
	                    K40, K41, K42  \
) { \
	{ K00,     K01,     K02,     K03,     K04,     K05,     K06 }, \
	{ K10,     K11,     K12,     K13,     K14,     K15,     K16 }, \
	{ K20,     K21,     K22,     K23,     K24,     K25,     K26 }, \
	{ K30,     K31,     K32,     K33,     K34,     K35,     K36 }, \
	{ K42,     K38,     K37,     NAK,   NAK,   NAK,   NAK, }, \
	{ K39,     K41,     K40,     NAK,   NAK,   NAK,   NAK }  \
}

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    /*
     * ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐
     * │ ` │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │ 9 │ 0 │ - │ = │ Backsp│
     * ├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤
     * │ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │ [ │ ] │  \  │
     * ├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤
     * │ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │ ; │ ' │  Enter │
     * ├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤
     * │ Shift  │ Z │ X │ C │ V │ B │ N │ M │ , │ . │ / │    Shift │
     * ├────┬───┴┬──┴─┬─┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤
     * │Ctrl│GUI │Alt │                        │ Alt│ GUI│Menu│Ctrl│
     * └────┴────┴────┴────────────────────────┴────┴────┴────┴────┘
     */
    [0] = LAYOUT(KC_NO,
        //KC_GRV,  KC_1,    KC_2,    KC_3,    KC_4,    KC_5,    KC_6,   
        //KC_TAB,  KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,    KC_Y,   
        //KC_CAPS, KC_A,    KC_S,    KC_D,    KC_F,    KC_G,    KC_H,   
        //KC_LSFT,          KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,   
        //KC_LCTL, KC_LGUI, KC_LALT,                            KC_SPC, 
                KC_GRV, KC_1, KC_2, KC_3, KC_4, KC_5, KC_6,
                RGB_MOD, KC_Q, KC_W, KC_E, KC_R, KC_T, RESET,
                RGB_HUI, KC_A, KC_S, KC_D, KC_F, KC_G, KC_TAB,
                KC_ESC, KC_Z, KC_X, KC_C, KC_V, KC_B, KC_TAB,
                                    KC_LSFT, KC_LCTL, KC_SPC,
                                    KC_LALT, KC_LGUI, KC_ENT
    )
};

led_config_t g_led_config = {
  // Key Matrix to LED Index
  LAYOUT(NO_LED,
                27, 28, 29, 30, 31, 32, 33,
                26, 25, 24, 23, 22, 21, 20,
                13, 14, 15, 16, 17, 18, 19,
                12, 11, 10,  9,  8,  7,  6,
                                    5, 4, 1,
                                    3, 2, 0
    
    
  ),{
    // LED Index to Physical PositionLAYOUT(NO_LED,
    // Thumb
    {70, 70},
    {75, 65}, {65, 60}, {55, 55},
    {70, 55}, {60, 50},

    // Indicators
    {75, 65}, {65, 60}, {55, 55},

    // Main keys
    {60, 30}, {50, 30}, {40, 30}, {30, 30}, {20, 30}, {10, 30}, {0, 30},
    {0, 20}, {10, 20}, {20, 20}, {30, 20}, {40, 20}, {50, 20}, {60, 20},
    {60, 10}, {50, 10}, {40, 10}, {30, 10}, {20, 10}, {10, 10}, {0, 10},
    {0, 0}, {10, 0}, {20, 0}, {30, 0}, {40, 0}, {50, 0}, {60, 0}
}, {
  // LED Index to Flag
  // Thumb = LED_FLAG_KEYLIGHT | LED_FLAG_MODIFIER
  5, 5, 5, 5, 5, 5,
  // Indicator = LED_FLAG_INDICATOR
  8, 8, 8,
  // Main keys
  4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4
} };


//float mysong[][2] = SONG(PREONIC_SOUND);
//bool process_record_user(uint16_t keycode, keyrecord_t *record) {
//  PLAY_SONG(mysong);
//  return false;
//}

//void keyboard_post_init_user(void) {
//    rgb_matrix_mode(RGB_MATRIX_HUE_WAVE);
//}

static void render_logo(void) {
    static const char PROGMEM logo[] = {
        0x08, 0x0c, 0x0c, 0x0c, 0x0c, 0x1c, 0x1c, 0x7c, 0xfc, 0xfc, 0xfc, 0xfc, 0xfc, 0xfc, 0xe0, 0xe0, 
        0xe0, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x88, 0x08, 0x0c, 0x0c, 0x0c, 0x1c, 0x1c, 0xfc, 0xfc, 0xfc, 
        0xfc, 0xfc, 0xf8, 0xf0, 0xf0, 0xf0, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xc0, 0x00, 0x00, 0x80, 0x80, 
        0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x70, 0xf8, 0xfc, 0xfc, 0xfe, 0xfe, 0x1f, 0x07, 0x01, 
        0x00, 0x00, 0x00, 0x00, 0x40, 0xc0, 0xc0, 0xc0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x9f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x03, 0x20, 0xf0, 0xf8, 0xf8, 0xfc, 
        0xfe, 0x7e, 0xff, 0xff, 0xff, 0xff, 0xf8, 0xe0, 0xc0, 0x20, 0x70, 0xf8, 0xf8, 0xfc, 0xfe, 0xfe, 
        0xff, 0xff, 0x7f, 0x7f, 0x7f, 0xff, 0xff, 0xff, 0xfc, 0x20, 0x80, 0x80, 0x80, 0xff, 0xff, 0xff, 
        0xff, 0xff, 0xff, 0xe0, 0xf0, 0xf8, 0xf8, 0xff, 0x7f, 0x3f, 0x1f, 0x1f, 0x03, 0x03, 0x03, 0x03, 
        0x07, 0x07, 0x0f, 0x3f, 0xff, 0xfe, 0xfc, 0xf8, 0xb0, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 
        0xf8, 0xf8, 0xfc, 0xfc, 0xfe, 0xfe, 0xff, 0x7f, 0x7f, 0x7f, 0xff, 0xff, 0xff, 0xfe, 0x70, 0xe0, 
        0xe0, 0xf0, 0xf8, 0xf8, 0xfc, 0xfc, 0x7e, 0x7e, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x0d, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 
        0xff, 0x70, 0x3f, 0x0f, 0x07, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 
        0xff, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x1f, 0x07, 0x01, 0x00, 0x00, 0x05, 0x0f, 0xff, 0xff, 0xff, 
        0xff, 0xff, 0xff, 0x03, 0x07, 0x07, 0x0f, 0x1f, 0xff, 0xfe, 0xfe, 0xfc, 0x38, 0x10, 0x10, 0x38, 
        0xf8, 0xfc, 0xfe, 0xff, 0xff, 0x07, 0x7f, 0xff, 0xff, 0xfe, 0xf8, 0xe0, 0xc0, 0x80, 0x00, 0x00, 
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x1f, 0x0f, 0x03, 0x00, 0xff, 
        0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xe0, 
        0x70, 0x78, 0x7f, 0x3f, 0x3f, 0x1f, 0x1f, 0x07, 0x01, 0x00, 0x00, 0x30, 0x3f, 0x3f, 0x7f, 0x7f, 
        0xff, 0xf8, 0x3c, 0x1c, 0x0e, 0x0e, 0x06, 0x06, 0x06, 0x00, 0x10, 0x3f, 0x3f, 0x7f, 0x7f, 0xff, 
        0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0xff, 0xff, 0xff, 
        0x7f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf8, 0xfe, 0x7f, 0x7f, 0x3f, 0x1f, 0x0e, 0x00, 0x10, 0x38, 
        0x3f, 0x7f, 0x7f, 0xff, 0xff, 0x7e, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x10, 
        0x3f, 0x3f, 0x7f, 0x7f, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x1f, 
        0x1f, 0x1f, 0x1f, 0x1f, 0x3f, 0x3c, 0x38, 0xf8, 0xff, 0xff, 0xff, 0x7f, 0x7f, 0x30, 0x20, 0x00
    };
    oled_write_raw_P(logo, sizeof(logo));
}

bool oled_task_user(void) {
    render_logo();
    return false;
}

// keyboards/sowbug/68keys/config.h
void suspend_power_down_kb(void)
{
    rgb_matrix_set_suspend_state(true);
}

// keyboards/sowbug/68keys/config.h
void suspend_wakeup_init_kb(void)
{
    rgb_matrix_set_suspend_state(false);
}
